(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{43:function(e,t,n){},45:function(e,t,n){},73:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),s=n(34),a=n.n(s),o=(n(43),n(24)),i=n(22),j=n.n(i),l=n(38),u=n(35),h=n(9),d=n(10),b=n(12),O=n(11),x=(n(45),n(0)),p=function(e){var t=e.user;return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:t.id}),Object(x.jsx)("td",{children:t.username}),Object(x.jsx)("td",{children:t.firstName}),Object(x.jsx)("td",{children:t.lastName}),Object(x.jsx)("td",{children:t.email})]})},f=function(e){var t=e.users;return Object(x.jsxs)("table",{children:[Object(x.jsxs)("thead",{children:[Object(x.jsx)("tr",{children:Object(x.jsx)("th",{children:"USERS"})}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{children:"User ID"}),Object(x.jsx)("th",{children:"Username"}),Object(x.jsx)("th",{children:"First name"}),Object(x.jsx)("th",{children:"Last name"}),Object(x.jsx)("th",{children:"Email"})]})]}),Object(x.jsx)("tbody",{children:t.map((function(e){return Object(x.jsx)(p,{user:e},e.id)}))})]})},m=n(8),v=function(e){var t=e.project,n=e.deleteProject;return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:t.id}),Object(x.jsx)("td",{children:Object(x.jsx)(m.b,{to:"/project/".concat(t.name,"/"),children:t.name})}),Object(x.jsx)("td",{children:t.users}),Object(x.jsx)("td",{children:t.repoUrl}),Object(x.jsx)("td",{children:Object(x.jsx)("button",{onClick:function(){return n(t.id)},type:"button",children:"Delete"})})]})},g=function(e){var t=e.projects,n=e.deleteProject;return Object(x.jsxs)("div",{className:"projects-list",children:[Object(x.jsxs)("table",{children:[Object(x.jsxs)("thead",{children:[Object(x.jsx)("tr",{children:Object(x.jsx)("th",{children:"PROJECTS"})}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{children:"ID"}),Object(x.jsx)("th",{children:"Name"}),Object(x.jsx)("th",{children:"Users (IDs)"}),Object(x.jsx)("th",{children:"Repository"}),Object(x.jsx)("th",{})]})]}),Object(x.jsx)("tbody",{children:t.map((function(e){return Object(x.jsx)(v,{project:e,deleteProject:n},e.name)}))})]}),Object(x.jsx)(m.b,{to:"/projects/create",children:"Create"})]})},k=function(e){var t=e.todo,n=e.deleteToDo;return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:t.id}),Object(x.jsx)("td",{children:t.project}),Object(x.jsx)("td",{children:t.text}),Object(x.jsx)("td",{children:t.created}),Object(x.jsx)("td",{children:t.updated}),Object(x.jsx)("td",{children:t.user}),Object(x.jsx)("td",{children:Object(x.jsx)("button",{onClick:function(){return n(t.id)},type:"button",children:"Delete"})})]})},y=function(e){var t=e.todos,n=e.deleteToDo;return Object(x.jsxs)("div",{className:"todos-list",children:[Object(x.jsxs)("table",{children:[Object(x.jsxs)("thead",{children:[Object(x.jsx)("tr",{children:Object(x.jsx)("th",{children:"TODOS"})}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{children:"ID"}),Object(x.jsx)("th",{children:"Project"}),Object(x.jsx)("th",{children:"Text"}),Object(x.jsx)("th",{children:"Created"}),Object(x.jsx)("th",{children:"Updated"}),Object(x.jsx)("th",{children:"User"})]})]}),Object(x.jsx)("tbody",{children:t.map((function(e){return Object(x.jsx)(k,{todo:e,deleteToDo:n},e.id)}))})]}),Object(x.jsx)(m.b,{to:"/todos/create",children:"Create"})]})},C=n(2),S=function(e){var t=e.project;return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:t.name}),Object(x.jsx)("td",{children:t.users}),Object(x.jsx)("td",{children:t.repoUrl})]})},T=function(e){var t=e.projects,n=Object(C.g)().name,c=t.filter((function(e){return e.name===n}));return console.log("project",t),Object(x.jsxs)("table",{children:[Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{children:"NAME"}),Object(x.jsx)("th",{children:"USERS"}),Object(x.jsx)("th",{children:"REPOSITORY"})]}),c.map((function(e){return Object(x.jsx)(S,{project:e},e.name)}))]})},D=n(15),N=function(e){Object(b.a)(n,e);var t=Object(O.a)(n);function n(e){var c;return Object(h.a)(this,n),(c=t.call(this,e)).state={name:"",repoUrl:"",user:e.users[0].id},c}return Object(d.a)(n,[{key:"handleChange",value:function(e){this.setState(Object(D.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){this.props.createProject(this.state.name,this.state.repoUrl,this.state.user),e.preventDefault()}},{key:"render",value:function(){var e=this;return Object(x.jsxs)("form",{onSubmit:function(t){return e.handleSubmit(t)},children:[Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{for:"login",children:"name"}),Object(x.jsx)("input",{type:"text",className:"form-control",name:"name",value:this.state.name,onChange:function(t){return e.handleChange(t)}})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{for:"repoUrl",children:"repository"}),Object(x.jsx)("input",{type:"text",className:"form-control",name:"repoUrl",value:this.state.repoUrl,onChange:function(t){return e.handleChange(t)}})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{for:"user",children:"user"}),Object(x.jsx)("select",{name:"user",className:"form-control",onChange:function(t){return e.handleChange(t)},children:this.props.users.map((function(e){return Object(x.jsx)("option",{value:e.id,children:e.username})}))})]}),Object(x.jsx)("input",{type:"submit",className:"btn btn-primary",value:"Save"})]})}}]),n}(r.a.Component),P=function(e){Object(b.a)(n,e);var t=Object(O.a)(n);function n(e){var c;return Object(h.a)(this,n),(c=t.call(this,e)).state={text:"",isActive:!0,project:e.projects[0].id,user:e.users[0].id},c}return Object(d.a)(n,[{key:"handleChange",value:function(e){this.setState(Object(D.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){this.props.createToDo(this.state.text,this.state.isActive,this.state.project,this.state.user),e.preventDefault()}},{key:"render",value:function(){var e=this;return Object(x.jsxs)("form",{onSubmit:function(t){return e.handleSubmit(t)},children:[Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{for:"login",children:"text"}),Object(x.jsx)("input",{type:"text",className:"form-control",name:"text",value:this.state.text,onChange:function(t){return e.handleChange(t)}})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{for:"isActive",children:"active"}),Object(x.jsx)("input",{type:"checkbox",checked:"checked",className:"form-control",name:"isActive",value:this.state.isActive,onChange:function(t){return e.handleChange(t)}})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{for:"project",children:"project"}),Object(x.jsx)("select",{name:"project",className:"form-control",onChange:function(t){return e.handleChange(t)},children:this.props.projects.map((function(e){return Object(x.jsx)("option",{value:e.id,children:e.name})}))})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{for:"user",children:"user"}),Object(x.jsx)("select",{name:"user",className:"form-control",onChange:function(t){return e.handleChange(t)},children:this.props.users.map((function(e){return Object(x.jsx)("option",{value:e.id,children:e.username})}))})]}),Object(x.jsx)("input",{type:"submit",className:"btn btn-primary",value:"Save"})]})}}]),n}(r.a.Component),U=function(e){Object(b.a)(n,e);var t=Object(O.a)(n);function n(e){var c;return Object(h.a)(this,n),(c=t.call(this,e)).state={username:"",password:""},c}return Object(d.a)(n,[{key:"handleChange",value:function(e){this.setState(Object(D.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){this.props.getToken(this.state.username,this.state.password),e.preventDefault()}},{key:"render",value:function(){var e=this;return Object(x.jsxs)("form",{onSubmit:function(t){return e.handleSubmit(t)},children:[Object(x.jsx)("input",{type:"text",name:"username",placeholder:"username",value:this.state.username,onChange:function(t){return e.handleChange(t)}}),Object(x.jsx)("input",{type:"password",name:"password",placeholder:"password",value:this.state.password,onChange:function(t){return e.handleChange(t)}}),Object(x.jsx)("input",{type:"submit",value:"Login"})]})}}]),n}(r.a.Component),w=n(13),A=n.n(w),F=function(){return Object(x.jsx)("div",{className:"footer",children:Object(x.jsxs)("div",{class:"social",style:{padding:"25px",backgroundColor:"lightskyblue",display:"flex",flexDirection:"column"},children:[Object(x.jsx)("a",{href:"#",class:"social1",children:"Twitter"}),Object(x.jsx)("a",{href:"#",class:"social2",children:"Facebook"}),Object(x.jsx)("a",{href:"#",class:"social3",children:"VK"}),Object(x.jsx)("a",{href:"#",class:"social4",children:"GeekBrains"})]})})},E=function(){return Object(x.jsxs)("div",{class:"menu",style:{padding:"25px",backgroundColor:"lightgreen",display:"flex",justifyContent:"space-between"},children:[Object(x.jsx)("a",{href:"#",class:"menu1",children:"Main Page"}),Object(x.jsx)("a",{href:"#",class:"menu2",children:"Users"}),Object(x.jsx)("a",{href:"#",class:"menu3",children:"Log in"}),Object(x.jsx)("a",{href:"#",class:"menu4",children:"GeekBrains"})]})},I=n(25),L=function(e){var t=e.location;return Object(x.jsx)("div",{children:Object(x.jsxs)("h1",{children:["Page on path '",t.pathname,"' not found"]})})},H=function(e){return"".concat("http://80.78.253.197:8000/api/").concat(e)},R=function(e){Object(b.a)(n,e);var t=Object(O.a)(n);function n(e){var c;return Object(h.a)(this,n),(c=t.call(this,e)).state={users:[],projects:[],todos:[],token:""},c}return Object(d.a)(n,[{key:"setToken",value:function(e){var t=this;(new I.a).set("token",e),this.setState({token:e},(function(){return t.loadData()}))}},{key:"isAuthenticated",value:function(){return!!this.state.token}},{key:"logout",value:function(){this.setToken("")}},{key:"getTokenFromStorage",value:function(){var e=this,t=(new I.a).get("token");this.setState({token:t},(function(){return e.loadData()}))}},{key:"getToken",value:function(e,t){var n=this;A.a.post("http://80.78.253.197:8000/api/token-auth/",{username:e,password:t}).then((function(e){n.setToken(e.data.token)})).catch((function(e){return alert("\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c")}))}},{key:"getHeaders",value:function(){var e={"Content-Type":"application/json"};return this.isAuthenticated()&&(e.Authorization="Token ".concat(this.state.token)),e}},{key:"loadData",value:function(){var e=Object(u.a)(j.a.mark((function e(){var t,n,c,r,s,a,o,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getHeaders(),n=[H("users/"),H("projects/"),H("todos/")],c=n.map((function(e){return A.a.get(e,{headers:t}).catch((function(e){return null}))})),e.prev=3,e.next=6,A.a.all(c);case 6:r=e.sent,s=Object(l.a)(r,3),a=s[0],o=s[1],i=s[2],this.setState({users:a.data.results,projects:o.data.results,todos:i.data.results}),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(3),console.log(e.t0.message),this.setState({projects:[]});case 18:case"end":return e.stop()}}),e,this,[[3,14]])})));return function(){return e.apply(this,arguments)}}()},{key:"createProject",value:function(e,t,n){var c=this;console.log(e,t,n);var r=this.getHeaders(),s={name:e,repoUrl:t,users:[n]};A.a.post("http://80.78.253.197:8000/api/projects/",s,{headers:r}).then((function(e){var t=e.data;c.setState({projects:[].concat(Object(o.a)(c.state.projects),[t])})})).catch((function(e){return console.log(e)}))}},{key:"createToDo",value:function(e,t,n,c){var r=this;console.log(e,t,n,c);var s=this.getHeaders(),a={text:e,isActive:t,project:n,user:c};console.log("data is here",a),A.a.post("http://80.78.253.197:8000/api/todos/",a,{headers:s}).then((function(e){var t=e.data;console.log("todo here",t),r.setState({todos:[].concat(Object(o.a)(r.state.todos),[t])})})).catch((function(e){return console.log(e)}))}},{key:"deleteProject",value:function(e){var t=this,n=this.getHeaders(),c=H("projects/".concat(e,"/"));A.a.delete(c,{headers:n}).then((function(n){t.setState({projects:t.state.projects.filter((function(t){return t.id!==e}))})})).catch((function(e){return console.log(e)})),console.log("delete",e)}},{key:"deleteToDo",value:function(e){var t=this,n=this.getHeaders(),c=H("todos/".concat(e,"/"));A.a.delete(c,{headers:n}).then((function(n){t.setState({todos:t.state.todos.filter((function(t){return t.id!==e}))})})).catch((function(e){return console.log(e)}))}},{key:"componentDidMount",value:function(){this.getTokenFromStorage()}},{key:"render",value:function(){var e=this;return Object(x.jsxs)("div",{className:"App",children:[Object(x.jsx)(E,{}),Object(x.jsxs)(m.a,{children:[Object(x.jsx)("nav",{children:Object(x.jsxs)("ul",{children:[Object(x.jsx)("li",{children:Object(x.jsx)(m.b,{to:"/",children:"Users"})}),Object(x.jsx)("li",{children:Object(x.jsx)(m.b,{to:"/projects",children:"Projects"})}),Object(x.jsx)("li",{children:Object(x.jsx)(m.b,{to:"/todos",children:"ToDos"})}),Object(x.jsx)("li",{children:this.isAuthenticated()?Object(x.jsx)("button",{onClick:function(){return e.logout()},children:"Logout"}):Object(x.jsx)(m.b,{to:"/login",children:"Login"})})]})}),Object(x.jsxs)(C.d,{children:[Object(x.jsx)(C.b,{exact:!0,path:"/",component:function(){return Object(x.jsx)(f,{users:e.state.users})}}),Object(x.jsx)(C.b,{exact:!0,path:"/projects/create",component:function(){return Object(x.jsx)(N,{users:e.state.users,createProject:function(t,n,c){return e.createProject(t,n,c)}})}}),Object(x.jsx)(C.b,{exact:!0,path:"/projects",component:function(){return Object(x.jsx)(g,{projects:e.state.projects,deleteProject:function(t){return e.deleteProject(t)}})}}),Object(x.jsx)(C.b,{exact:!0,path:"/todos",component:function(){return Object(x.jsx)(y,{todos:e.state.todos,deleteToDo:function(t){return e.deleteToDo(t)}})}}),Object(x.jsx)(C.b,{exact:!0,path:"/todos/create",component:function(){return Object(x.jsx)(P,{projects:e.state.projects,users:e.state.users,createToDo:function(t,n,c,r){return e.createToDo(t,n,c,r)}})}}),Object(x.jsx)(C.b,{exact:!0,path:"/login",component:function(){return Object(x.jsx)(U,{getToken:function(t,n){return e.getToken(t,n)}})}}),Object(x.jsx)(C.b,{path:"/project/:name",children:Object(x.jsx)(T,{projects:this.state.projects})}),Object(x.jsx)(C.a,{from:"/users",to:"/"}),Object(x.jsx)(C.b,{component:L})]})]}),Object(x.jsx)(F,{})]})}}]),n}(r.a.Component),B=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,74)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,s=t.getLCP,a=t.getTTFB;n(e),c(e),r(e),s(e),a(e)}))};a.a.render(Object(x.jsx)(r.a.StrictMode,{children:Object(x.jsx)(R,{})}),document.getElementById("root")),B()}},[[73,1,2]]]);
//# sourceMappingURL=main.6d419cf1.chunk.js.map